## Automated Desktop App Testing with Appium
This repository contains automated tests for mobile applications using Appium. The tests are designed to run on a macOS environment and utilize the Appium framework, mac2 driver for Appium, Allure for reporting, Python, and pytest.

Due to the mac retina display, original pixel size cannot be able to compared with real pixel. For example, when screenshot taken on 200x200 it becomes 500x500 so base_images 1920 x 1080 however whenever I try to take screenshot using appium or manually image size getting bigger and bigger. For comparison, resize can be made according to the base_image however, there will be loss between pixel values and it will be fail on pixelmatch. 

Prerequisites
Before running the tests, make sure you have the following software installed on your machine:
```
Appium 2.4.1
Appium mac2 driver version 1.10.2
Allure 2.26.0
Python 3.11.0
macOS Sonoma Version 14.3 (23D56)
```


Installation
To set up the required dependencies, follow these steps:

Install Appium:


```bash
npm install -g appium@2.4.1
Install mac2 driver for Appium:
```


```bash
brew install allure
```


```bash
pip install -r requirements.txt
```

# Install pytest and other dependencies from requirements.txt

Running Tests
Start Appium:
```bash
appium
```

Run the tests:

```bash
python -m pytest
```

This command will execute the automated tests.

After the tests have finished, generate and serve Allure report:

```bash
allure serve
```
Here is the link that showing quick demo: [https://youtu.be/xpxPETIMoBY ](https://youtu.be/jiIu6PfdLNg)

Open the generated URL in your browser to view the detailed test report.

Here is the sample report link generated by executing this test suite: 

Please make sure that your mac configured for testing Here is the link for XCode: https://github.com/appium/appium-mac2-driver?tab=readme-ov-file#requirements

Adjust the capabilities in the test scripts as needed based on your setup.


## Resolving Retina Display Challenges in Image Comparison
### Issue Overview
The Mac Retina display introduces a challenge when comparing images with their original pixel size. Due to the high pixel density, the captured screenshots may not directly align with their actual pixel values. For instance, a screenshot taken at 200x200 may actually appear as 500x500 due to the Retina display's scaling.

### Problem Statement
The base images in our repository are standardized at 1920 x 1080. However, attempts to capture screenshots using Appium or manual methods result in images with progressively larger sizes. While resizing the images to match the base image dimensions is a potential solution, it introduces a drawback: pixel values are lost during the process. This discrepancy in pixel values poses a challenge, especially when using tools like pixelmatch for image comparison.

### Solution Approach
To address this issue, we need a strategy that considers the Retina display's scaling effect while maintaining accurate pixel values for reliable image comparison. Any suggestions or contributions to enhance image handling process are highly appreciated.

###Â Reference 

https://www.reddit.com/r/mac/comments/991yj4/2018_15_mbp_is_not_2880x1800_its_3360x2100/
https://github.com/cypress-io/cypress/issues/6485
